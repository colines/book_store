webpackJsonp([1],{"34J7":function(t,s){},"4/OX":function(t,s){},"5RrQ":function(t,s){},"6XTM":function(t,s){},"80uG":function(t,s){},"9n10":function(t,s){},Ac4u:function(t,s){},CHCQ:function(t,s){},EEos:function(t,s){},"F+OV":function(t,s){},IXan:function(t,s){},JbSS:function(t,s){},"KXV+":function(t,s){},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("+VlJ"),i={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},staticRenderFns:[]};var n=e("C7Lr")({name:"App"},i,!1,function(t){e("80uG")},null,null).exports,o=e("KGCO"),r=e("3cXf"),c=e.n(r),l={created:function(){var t=JSON.parse(localStorage.getItem("myUser")||"[]");t.uemail&&t.upwd&&(this.userFlag=!0,this.nickName=t.uname);var s=JSON.parse(localStorage.getItem("list")||"[]");this.$store.commit("setCount",s.length)},data:function(){return{userFlag:!1,nickName:""}},methods:{logout:function(){var t=this;this.axios.post(this.Home+"/api/v1/user/logout").then(function(s){if(s.data){t.$store.commit("setCount",0),t.userFlag=!1;var e=JSON.parse(localStorage.getItem("myUser")||"[]");e.upwd="",localStorage.setItem("myUser",c()(e))}})},goOrder:function(){if(JSON.parse(localStorage.getItem("myUser")||"[]").upwd)this.$router.push("/order");else{var t=this.$router.resolve("/login");window.open(t.href,"_blank")}},goCart:function(){if(JSON.parse(localStorage.getItem("myUser")||"[]").upwd)this.$router.push("/cart");else{var t=this.$router.resolve("/login");window.open(t.href,"_blank")}}}},d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"header-top"},[e("div",{staticClass:"header-left"},[e("p",[t._v("欢迎来到网上书城")]),t._v(" "),t.userFlag?e("p",{staticClass:"nickName",domProps:{textContent:t._s(t.nickName)}}):t._e(),t._v(" "),t.userFlag?e("p",[e("span",{staticClass:"middle"},[t._v("|")]),e("span",{staticClass:"logout",on:{click:t.logout}},[t._v("注销")])]):t._e(),t._v(" "),t.userFlag?t._e():e("router-link",{attrs:{to:"/login",tag:"a"}},[t._v("请登录")]),t._v(" "),t.userFlag?t._e():e("router-link",{attrs:{to:"/register",tag:"a"}},[t._v("免费注册")])],1),t._v(" "),e("div",{staticClass:"header-right"},[e("ul",[e("li",{on:{click:t.goOrder}},[e("span",{staticClass:"iconfont"},[t._v("")]),t._v("我的订单")]),t._v(" "),e("li",{on:{click:t.goCart}},[e("span",{staticClass:"iconfont"},[t._v("")]),t._v("我的购物车 "),t.userFlag?e("span",{staticClass:"count"},[t._v(t._s(this.$store.state.count))]):t._e()]),t._v(" "),t._m(0),t._v(" "),t._m(1)])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("span",{staticClass:"iconfont"},[this._v("")]),this._v("关于我们")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("span",{staticClass:"iconfont"},[this._v("")]),this._v("客户热线：400-999999")])}]};var u=e("C7Lr")(l,d,!1,function(t){e("gXPG")},"data-v-580efb06",null).exports,p={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"header-wrap"},[e("div",{staticClass:"wrap"},[e("div",{staticClass:"logo",on:{click:t.goHome}},[e("span",{staticClass:"iconfont iconfont-logo"},[t._v("")]),e("span",{staticClass:"store"},[t._v("书 城")])]),t._v(" "),e("div",{staticClass:"search-nav"},[e("div",{staticClass:"search-content"},[e("div",{staticClass:"search"},[e("span",{staticClass:"iconfont iconfont-search"},[t._v("")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyWords,expression:"keyWords"}],staticClass:"search-form",attrs:{type:"text",placeholder:"关键词",maxlength:"50"},domProps:{value:t.keyWords},on:{keyup:function(s){return"button"in s||!t._k(s.keyCode,"enter",13,s.key,"Enter")?t.search(s):null},input:function(s){s.target.composing||(t.keyWords=s.target.value)}}}),t._v(" "),e("button",{staticClass:"btn-search",attrs:{type:"button"},on:{click:t.search}},[t._v("搜 索")])])])]),t._v(" "),e("div",{})])])},staticRenderFns:[]};var v=e("C7Lr")({data:function(){return{keyWords:""}},methods:{goHome:function(){this.$router.push("/")},search:function(){this.$store.commit("setKeyWords",this.keyWords),this.$router.push("/search")}}},p,!1,function(t){e("W9a1")},"data-v-28d4ef82",null).exports,h=e("41jX"),m={props:["list"],components:{swiper:h.swiper,swiperSlide:h.swiperSlide},data:function(){return{swiperOption:{autoplay:3e3,speed:1e3,loop:!0}}}},f={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"wraper"},[s("swiper",{attrs:{options:this.swiperOption}},this._l(this.list,function(t){return s("swiper-slide",{key:t.url},[s("img",{staticClass:"swiper-img",attrs:{src:t.url,alt:""}})])}),1)],1)},staticRenderFns:[]};var _={created:function(){this.getAll(),this.getHotList()},data:function(){return{topClass:"topClass",categoryArr:[],categoryList:[{oid:1,ostop:562},{oid:2,ostop:1202},{oid:3,ostop:1842},{oid:4,ostop:2482},{oid:5,ostop:3122},{oid:6,ostop:3762},{oid:7,ostop:4402}],imgesList:[{url:"http://img52.ddimg.cn/9002790052407902.jpg"},{url:"http://img61.ddimg.cn/upload_img/00778/a/750x315_fen_wenyi-1545119256.jpg"},{url:"http://img63.ddimg.cn/topic_img/gys_0015115/2018.12.20BJNZQD750_315.jpg"},{url:"http://img56.ddimg.cn/9002820076238226.jpg"}],bookList:[]}},methods:{getAll:function(){var t=this;this.axios.post(this.Home+"/api/v1/category/getAll").then(function(s){s.data.data.length&&(t.categoryArr=s.data.data,t.setCategoryList())})},setCategoryList:function(){for(var t=0;t<7;t++)this.categoryList[t].category=this.categoryArr[t].cname},goCategory:function(t){var s=null;s=setInterval(function(){var e=document.documentElement.scrollTop||document.body.scrollTop;document.documentElement.scrollTop=document.body.scrollTop=e+100,e+600>t&&(clearInterval(s),document.documentElement.scrollTop=document.body.scrollTop=t-20)},10)},showBookInfo:function(t){var s=this.$router.resolve({path:"/detail",query:{pid:t}});window.open(s.href,"_blank")},getHotList:function(){var t=this;this.axios.post(this.Home+"/api/v1/product/search?ptitle=").then(function(s){s.data.data.list&&(t.bookList=s.data.data.list.slice(5),sessionStorage.setItem("hotList",c()(s.data.data.list)))})}},components:{swiper:e("C7Lr")(m,f,!1,function(t){e("YYgg")},"data-v-fe9ec77a",null).exports}},g={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[t._m(0),t._v(" "),e("div",{staticClass:"nav-content"},[e("div",{staticClass:"nav-wrap"},[e("div",{staticClass:"indexLeftLink"},[t._m(1),t._v(" "),e("ul",t._l(t.categoryList,function(s){return e("li",{key:s.oid,on:{click:function(e){t.goCategory(s.ostop)}}},[e("dl",{staticClass:"primary-dl"},[e("dt",[e("span",{domProps:{textContent:t._s(s.category)}}),e("span",{staticClass:"iconfont"},[t._v("")])])])])}),0)]),t._v(" "),e("div",{staticClass:"banner-wraper"},[e("swiper",{attrs:{list:t.imgesList}})],1),t._v(" "),e("div",{staticClass:"banner-right"},[e("div",{staticClass:"book-list"},[t._m(2),t._v(" "),e("ul",t._l(t.bookList,function(s,a){return e("li",{key:s.pid,on:{click:function(e){t.showBookInfo(s.pid)}}},[e("dl",{staticClass:"book-dl"},[e("dt",[e("span",{class:a<3?t.topClass:"num",domProps:{textContent:t._s(a+1)}}),t._v(" "),e("p",{staticClass:"book-name"},[e("a",{attrs:{href:""}},[t._v("\n                      "+t._s(s.ptitle)+"\n                    ")])])])])])}),0)])])])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"book-ad"},[s("img",{attrs:{src:"http://112.74.39.181:1453/img/book-ad.jpg",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",{staticClass:"bookCategory"},[s("span",{staticClass:"iconfont categoryIcon"},[this._v("")]),this._v(" "),s("span",[this._v("图书分类")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",{staticClass:"book-hot"},[s("span",[this._v("图书热卖榜")]),this._v(" "),s("span",{staticClass:"iconfont hotIcon"},[this._v("")])])}]};var C=e("C7Lr")(_,g,!1,function(t){e("5RrQ")},"data-v-375a10ec",null).exports,w={props:["list"],created:function(){},data:function(){return{pageNum:1,pages:"",cname:"",itemlist:this.list}},watch:{list:function(t,s){this.itemlist=t}},methods:{showBookInfo:function(t){var s=this.$router.resolve({path:"/detail",query:{pid:t}});window.open(s.href,"_blank")},update:function(){var t=this;this.pageNum=this.itemlist.pageNum,this.pages=this.itemlist.pages,this.pageNum=(this.pageNum+1)%this.pages,0==this.pageNum&&(this.pageNum=this.pages);var s=this.$qs.stringify({cname:this.itemlist.category,pageNum:this.pageNum});this.axios.post(this.Home+"/api/v1/product/getPageByCname",s).then(function(s){t.itemlist=s.data.data,t.itemlist.category=t.list.category})}}},y={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"main-content"},[e("div",{staticClass:"content"},[e("div",{staticClass:"content-title"},[e("div",{staticClass:"side-icon"}),t._v(" "),e("div",{staticClass:"category"},[e("span",{domProps:{textContent:t._s(t.list.category)}})]),t._v(" "),e("div",{staticClass:"content-more"},[e("span",{staticClass:"iconfont"},[t._v("")]),t._v(" "),e("span",{staticClass:"update",on:{click:t.update}},[t._v("换一批")])])]),t._v(" "),e("div",{staticClass:"content-books"},[e("ul",t._l(t.itemlist.list,function(s){return e("li",{key:s.pid,staticClass:"book-li",on:{click:function(e){t.showBookInfo(s.pid)}}},[e("img",{staticClass:"book-img",attrs:{src:t.Img+s.headImg,alt:""}}),t._v(" "),e("p",{staticClass:"book-name",domProps:{textContent:t._s(s.ptitle)}}),t._v(" "),e("p",{staticClass:"author"},[t._v("作者 "+t._s(s.pprovider))]),t._v(" "),e("p",{staticClass:"price"},[e("span",[e("span",{staticClass:"price-size"},[t._v("￥")]),t._v(" "),e("span",{staticClass:"how-price",domProps:{textContent:t._s(s.pprice/100*.75)}})]),t._v(" "),e("span",{staticClass:"rob"},[e("span",{staticClass:"price-size"},[t._v("￥")]),t._v(" "),e("span",{domProps:{textContent:t._s(s.pprice/100)}})])])])}),0)])])])},staticRenderFns:[]};var k=e("C7Lr")(w,y,!1,function(t){e("Ac4u")},"data-v-57438398",null).exports,b={data:function(){return{infoFlag:!1,index:"",infoActive:"infoActive",iconfontActive:"iconfontActive",info:"info",iconfont:"iconfont",navList:[{id:0,info:"我的订单",code:"&#xe653;",url:"/order"},{id:1,info:"购物车",code:"&#xe602;",url:"/cart"},{id:2,info:"反馈",code:"&#xe651;",url:""},{id:3,info:"回到顶部",code:"&#xe62c;",url:""}]}},methods:{changeActive:function(t){this.index=t,this.infoFlag=!0},removeActive:function(t){this.index="",this.infoFlag=!1},goTop:function(){var t=null;t=setInterval(function(){var s=document.documentElement.scrollTop||document.body.scrollTop,e=Math.floor(-s/5);document.documentElement.scrollTop=document.body.scrollTop=s+e,0==s&&clearInterval(t)},30)},changeUrl:function(t){if(t)if(JSON.parse(localStorage.getItem("myUser")||"[]").upwd)this.$router.push(t);else{var s=this.$router.resolve("/login");window.open(s.href,"_blank")}else this.goTop()}}},x={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"right-nav"},[e("ul",t._l(t.navList,function(s){return e("li",{key:s.id,staticClass:"nav-li",on:{mouseover:function(e){t.changeActive(s.id)},mouseout:function(e){t.removeActive(s.id)},click:function(e){t.changeUrl(s.url)}}},[e("span",{class:t.index===s.id?t.infoActive:t.info},[t._v(t._s(s.info))]),t._v(" "),e("span",{staticClass:"iconfont",class:t.index===s.id?t.iconfontActive:"",domProps:{innerHTML:t._s(s.code)}},[t._v("")])])}),0)])},staticRenderFns:[]};var F=e("C7Lr")(b,x,!1,function(t){e("34J7")},"data-v-ab024766",null).exports,$={components:{"header-top":u,"header-wrap":v,"nav-content":C,"teach-content":k,"liter-content":k,"novel-content":k,"life-content":k,"techno-content":k,"magazine-content":k,"cartoon-content":k,"right-nav":F},created:function(){this.getAll()},data:function(){return{categoryArr:[],allList:[],list1:[],list2:[],list3:[],list4:[],list5:[],list6:[],list7:[]}},methods:{getAll:function(){var t=this;this.axios.post(this.Home+"/api/v1/category/getAll").then(function(s){s.data.data.length&&(t.categoryArr=s.data.data,t.getAllList())})},getAllList:function(){for(var t=0;t<7;t++)this.getList(this.categoryArr[t].cname)},getList:function(t){var s=this,e=this.$qs.stringify({cname:t,pageNum:1});this.axios.post(this.Home+"/api/v1/product/getPageByCname",e).then(function(e){switch(e.data.data.category=t,t){case"动漫":s.list1=e.data.data;break;case"哲学":s.list2=e.data.data;break;case"小说":s.list3=e.data.data;break;case"教育":s.list4=e.data.data;break;case"文学":s.list5=e.data.data;break;case"生活":s.list6=e.data.data;break;case"科技":s.list7=e.data.data}})}}},I={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home-header"},[e("header-top"),t._v(" "),e("header-wrap"),t._v(" "),e("nav-content"),t._v(" "),e("teach-content",{attrs:{list:t.list1}}),t._v(" "),e("liter-content",{attrs:{list:t.list2}}),t._v(" "),e("novel-content",{attrs:{list:t.list3}}),t._v(" "),e("life-content",{attrs:{list:t.list4}}),t._v(" "),e("techno-content",{attrs:{list:t.list5}}),t._v(" "),e("magazine-content",{attrs:{list:t.list6}}),t._v(" "),e("cartoon-content",{attrs:{list:t.list7}}),t._v(" "),e("right-nav"),t._v(" "),e("div",{staticClass:"footer"})],1)},staticRenderFns:[]};var L=e("C7Lr")($,I,!1,function(t){e("gvfg")},"data-v-4fff8ab2",null).exports,N={props:["list"],data:function(){return{pageNum:1,pages:"",cname:"",itemlist:this.list}},watch:{list:function(t,s){this.itemlist=t}},methods:{showBookInfo:function(t){var s=this.$router.resolve({path:"/detail",query:{pid:t}});window.open(s.href,"_blank")},update:function(){var t=this;this.pageNum<this.pages?this.pageNum++:this.pageNum=1;var s=this.$qs.stringify({ptitle:"",pageNum:this.pageNum});this.axios.post(this.Home+"/api/v1/product/search",s).then(function(s){s.data.data.list&&(t.itemlist=s.data.data,t.pages=s.data.data.pages)})}}},A={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"main-content"},[e("div",{staticClass:"content"},[e("div",{staticClass:"content-title"},[e("div",{staticClass:"side-icon"}),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"content-more"},[e("span",{staticClass:"iconfont"},[t._v("")]),t._v(" "),e("span",{staticClass:"update",on:{click:t.update}},[t._v("换一批")])])]),t._v(" "),e("div",{staticClass:"content-books"},[e("ul",t._l(t.itemlist.list,function(s){return e("li",{key:s.pid,staticClass:"book-li",on:{click:function(e){t.showBookInfo(s.pid)}}},[e("img",{staticClass:"book-img",attrs:{src:t.Img+s.headImg,alt:""}}),t._v(" "),e("p",{staticClass:"book-name",domProps:{textContent:t._s(s.ptitle)}}),t._v(" "),e("p",{staticClass:"author"},[t._v("作者 "+t._s(s.pprovider))]),t._v(" "),e("p",{staticClass:"price"},[e("span",[e("span",{staticClass:"price-size"},[t._v("￥")]),t._v(" "),e("span",{staticClass:"how-price",domProps:{textContent:t._s(s.pprice/100*.75)}})]),t._v(" "),e("span",{staticClass:"rob"},[e("span",{staticClass:"price-size"},[t._v("￥")]),t._v(" "),e("span",{domProps:{textContent:t._s(s.pprice/100)}})])])])}),0)])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"category"},[s("span",[this._v("猜你喜欢")])])}]};var S={components:{"guess-content":e("C7Lr")(N,A,!1,function(t){e("nV8p")},"data-v-669d06c1",null).exports},created:function(){this.hotUpdate(),this.getProBypid(),this.getguessList()},destroyed:function(){clearInterval(this.timer),this.timer=null},data:function(){return{num:1,numClass:"numClass",bookIndex:0,boderClass:"boderClass",hotIndex:0,timer:"",ballFlag:!1,boxFlag:!1,product:{},src:"",imgFiles:[],bookObject:{},hotList:[],guessList:[]}},methods:{getProBypid:function(){var t=this,s=this.$route.query.pid;this.axios.post(this.Home+"/api/v1/product/get?pid="+s).then(function(s){s.data.data?(t.bookObject=s.data.data,t.src=t.Img+t.bookObject.pimgFiles[0]):t.$router.push("/")})},changeBorder:function(t){this.bookIndex=t,this.src=this.Img+this.bookObject.pimgFiles[t]},numReduce:function(){this.num>1&&this.num--},numAdd:function(){this.num++},checkNum:function(){this.num>1||(this.num=1)},hotUpdate:function(){var t=this;this.hotList=JSON.parse(sessionStorage.getItem("hotList")||"[]"),this.hotList.length||this.axios.post(this.Home+"/api/v1/product/search?ptitle=").then(function(s){s.data.data.list&&(t.hotList=s.data.data.list,sessionStorage.setItem("hotList",c()(s.data.data.list)))}),this.timer=null,this.timer=setInterval(function(){t.hotIndex+=2,t.hotIndex=t.hotIndex%(t.hotList.length-1)},6e3)},showProduct:function(t){var s=this.$router.resolve({path:"/detail",query:{pid:t}});window.open(s.href,"_blank")},goCart:function(){if(JSON.parse(localStorage.getItem("myUser")||"[]").upwd){this.bookObject.num=this.num,this.ballFlag=!0;var t=JSON.parse(localStorage.getItem("list")||"[]");t.unshift(this.bookObject),localStorage.setItem("list",c()(t)),this.$store.commit("setCount",t.length);var s=this;setTimeout(function(){s.boxFlag=!0},1500)}else{var e=this.$router.resolve("/login");window.open(e.href,"_blank")}},goBuy:function(){if(JSON.parse(localStorage.getItem("myUser")||"[]").upwd){var t=[];t.unshift(this.bookObject),this.bookObject.num=this.num,sessionStorage.setItem("itemList",c()(t)),this.$router.push("/buy")}else{var s=this.$router.resolve("/login");window.open(s.href,"_blank")}},boxDisappear:function(){this.boxFlag=!1},beforeEnter:function(t){t.style.transform="translate(0,0)"},enter:function(t,s){var e=this.$refs.ball.getBoundingClientRect(),a=document.getElementById("badge").getBoundingClientRect(),i=a.left-e.left,n=a.top-e.top;t.style.transform="translate("+i+"px,"+n+"px)",t.style.transition="all 1s cubic-bezier(.6,0,.3,.6)",s()},afterEnter:function(t){this.ballFlag=!1},getguessList:function(){var t=this,s=this.$qs.stringify({ptitle:"",pageNum:1});this.axios.post(this.Home+"/api/v1/product/search",s).then(function(s){console.log(s),console.log("res"),t.guessList=s.data.data})}}},P={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"book-wrapper"},[t._m(0),t._v(" "),e("div",{staticClass:"book-show"},[e("div",{staticClass:"book-main"},[e("div",{staticClass:"big-pic"},[e("img",{staticClass:"book-img",attrs:{src:t.src,alt:""}})]),t._v(" "),e("div",{staticClass:"book-info"},[e("div",{staticClass:"info"},[e("h1",{staticClass:"book-name",domProps:{textContent:t._s(t.bookObject.ptitle)}}),t._v(" "),e("p",{staticClass:"author-info"},[e("span",[t._v("作者：")]),e("span",{staticClass:"author",domProps:{textContent:t._s(t.bookObject.pprovider)}}),t._v(" "),e("span",{staticClass:"publish"},[t._v("出版社：")]),e("span",{staticClass:"publish-name",domProps:{textContent:t._s(t.bookObject.pfirm)}})]),t._v(" "),e("div",{staticClass:"price-info"},[e("div",{staticClass:"price-pc"},[e("p",{staticClass:"price"},[e("span",[t._v("价格：")]),t._v(" "),e("span",{staticClass:"price-origin",domProps:{textContent:t._s("￥"+t.bookObject.pprice/100)}})]),t._v(" "),e("p",{staticClass:"price"},[e("span",[t._v("促销价：")]),t._v(" "),e("span",{staticClass:"price-discount"},[e("span",{staticClass:"yuan"},[t._v("￥")]),t._v(" "),e("span",{staticClass:"discount",domProps:{textContent:t._s(t.bookObject.pprice/100*.75)}})])])])]),t._v(" "),e("div",{staticClass:"small-pic"},[e("p",{staticClass:"pic"},[t._v("照片：")]),t._v(" "),e("ul",t._l(t.bookObject.pimgFiles,function(s,a){return e("li",{key:s,staticClass:"small-pic-li",class:a==t.bookIndex?t.boderClass:"",on:{click:function(s){t.changeBorder(a)}}},[e("img",{attrs:{src:t.Img+s,alt:""}})])}),0)]),t._v(" "),e("div",{staticClass:"book-count"},[e("p",{staticClass:"count"},[t._v("数量：")]),t._v(" "),e("div",{staticClass:"num-box"},[e("span",{staticClass:"num-reduce iconfont",class:1==t.num?t.numClass:"",on:{click:t.numReduce}},[t._v("")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.num,expression:"num"}],staticClass:"num-input",attrs:{type:"text "},domProps:{value:t.num},on:{blur:t.checkNum,input:function(s){s.target.composing||(t.num=s.target.value)}}}),t._v(" "),e("span",{staticClass:"num-add iconfont",on:{click:t.numAdd}},[t._v("")])])]),t._v(" "),e("div",{staticClass:"book-buy"},[e("button",{staticClass:"join-cart btn",on:{click:t.goCart}},[e("span",{staticClass:"iconfont cart-icon"},[t._v("")]),t._v(" "),e("span",{},[t._v("加入购物车")]),t._v(" "),e("transition",{on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.ballFlag,expression:"ballFlag"}],ref:"ball",staticClass:"ball"})])],1),t._v(" "),e("button",{staticClass:"buy-now btn",on:{click:t.goBuy}},[t._v("立即购买")])])])])]),t._v(" "),e("div",{staticClass:"hot-book"},[t._m(1),t._v(" "),e("ul",[e("li",{staticClass:"hot-li",on:{click:function(s){t.showProduct(t.hotList[t.hotIndex].pid)}}},[e("img",{staticClass:"hot-img",attrs:{src:t.Img+t.hotList[t.hotIndex].headImg,alt:""}}),t._v(" "),e("p",{staticClass:"hot-price"},[t._v("￥"+t._s(t.hotList[t.hotIndex].pprice/100*.75))])]),t._v(" "),e("li",{staticClass:"hot-li",on:{click:function(s){t.showProduct(t.hotList[t.hotIndex+1].pid)}}},[e("img",{staticClass:"hot-img",attrs:{src:t.Img+t.hotList[t.hotIndex+1].headImg,alt:""}}),t._v(" "),e("p",{staticClass:"hot-price"},[t._v("￥"+t._s(t.hotList[t.hotIndex+1].pprice/100*.75))])])])])]),t._v(" "),t.boxFlag?e("div",{staticClass:"box"},[e("span",{staticClass:"iconfont disappear-icon",on:{click:t.boxDisappear}},[t._v("")]),t._v(" "),e("div",{staticClass:"prompt-box"},[t._m(2),t._v(" "),e("router-link",{staticClass:"box-pay",attrs:{tag:"button",to:"/cart"}},[t._v("去购物车结算"),e("span",{staticClass:"iconfont go-icon"},[t._v("")])])],1)]):t._e(),t._v(" "),e("div",{staticClass:"badge",attrs:{id:"badge"}}),t._v(" "),e("div",{staticClass:"clear-fix"}),t._v(" "),e("guess-content",{attrs:{list:t.guessList}}),t._v(" "),e("div",{staticClass:"footer"})],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("img",{attrs:{src:"http://112.74.39.181:1453/img/book-ad2.jpg",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",{staticClass:"title"},[s("s"),this._v(" "),s("span",{staticClass:"hot-sell"},[this._v("热门推荐")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",{staticClass:"box-p"},[s("span",{staticClass:"iconfont success-icon"},[this._v("")]),this._v(" "),s("span",{staticClass:"box-info"},[this._v("已将商品添加到购物车")])])}]};var E={components:{"header-top":u,"header-wrap":v,"book-info":e("C7Lr")(S,P,!1,function(t){e("i8eD")},"data-v-7dfa5964",null).exports,"right-nav":F}},O={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"detail"},[s("header-top"),this._v(" "),s("header-wrap"),this._v(" "),s("book-info"),this._v(" "),s("right-nav")],1)},staticRenderFns:[]};var T=e("C7Lr")(E,O,!1,function(t){e("JbSS")},"data-v-1e00f817",null).exports,H={created:function(){if(JSON.parse(localStorage.getItem("myUser")||"[]").upwd){var t=JSON.parse(localStorage.getItem("list")||"[]");t.length?(this.checkeds=new Array(t.length),this.checkeds.fill(!1),this.count=t.length,this.cartFlag=!0,this.cartList=t):this.cartFlag=!1}else this.$router.push("/login")},data:function(){return{checkedAll:!1,count:0,checkeds:[],haveChecked:"",numClass:"numClass",bgClass:"bgClass",payClass:"payClass",cartFlag:!1,cartList:[]}},computed:{sum:function(){var t=0;for(var s in this.cartList)this.checkeds[s]&&(t+=this.cartList[s].num*this.cartList[s].pprice/100*.75);return t},selectCount:function(){if(0==this.count)return 0;for(var t=0,s=0;s<this.checkeds.length;s++)this.checkeds[s]&&t++;return t}},methods:{numReduce:function(t){this.cartList[t].num>1&&this.cartList[t].num--},numAdd:function(t){this.cartList[t].num++},checkNum:function(t){this.cartList[t].num>1||(this.cartList[t].num=1)},checkAll:function(){if(this.checkedAll)for(var t=0;t<this.checkeds.length;t++)this.$set(this.checkeds,t,!1);else for(var s=0;s<this.checkeds.length;s++)this.$set(this.checkeds,s,!0)},clearAllChecked:function(t){this.checkeds[t]&&(this.checkedAll=!1)},del:function(t){this.count--,this.checkeds.length--,this.$store.commit("setCount",this.count),this.cartList.length>1&&(this.checkeds[t]=this.checkeds[t+1]);var s=JSON.parse(localStorage.getItem("list")||"[]");s.splice(t,1),localStorage.setItem("list",c()(s)),this.cartList=s,0==this.count?this.cartFlag=!1:this.cartFlag=!0},selectedDel:function(){for(var t=[],s=0,e=0;e<this.checkeds.length;e++)this.checkeds[e]&&(t[s++]=e);for(var a=s-1;a>=0;a--)this.del(t[a]);this.count||(this.checkedAll=!1)},showBook:function(t){this.$router.push({path:"/detail",query:{pid:t}})},payMoney:function(){if(JSON.parse(localStorage.getItem("myUser")||"[]").upwd){var t=[],s=[];for(var e in this.cartList)this.checkeds[e]?t.push(this.cartList[e]):s.push(this.cartList[e]);t.length&&(sessionStorage.setItem("itemList",c()(t)),localStorage.setItem("list",c()(s)),this.$store.commit("setCount",s.length),this.$router.push("/buy"))}else this.$router.push("/login")}}},R={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"cart-show"},[t.cartFlag?e("div",{staticClass:"cart-body"},[e("div",{staticClass:"cart-all"},[t._v("\n      全部商品"),e("span",{staticClass:"num"},[t._v(t._s(t.count))])]),t._v(" "),e("div",{staticClass:"cart-wrap"},[e("ul",[e("li",{staticClass:"all-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedAll,expression:"checkedAll"}],attrs:{type:"checkbox",name:"",id:"a-c"},domProps:{checked:Array.isArray(t.checkedAll)?t._i(t.checkedAll,null)>-1:t.checkedAll},on:{click:function(s){t.checkAll()},change:function(s){var e=t.checkedAll,a=s.target,i=!!a.checked;if(Array.isArray(e)){var n=t._i(e,null);a.checked?n<0&&(t.checkedAll=e.concat([null])):n>-1&&(t.checkedAll=e.slice(0,n).concat(e.slice(n+1)))}else t.checkedAll=i}}}),t._v(" "),e("label",{attrs:{for:"a-c"}},[t._v("全选")])]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4)])]),t._v(" "),t._l(t.cartList,function(s,a){return e("div",{key:s.pid,staticClass:"cart-list",class:1==t.checkeds[a]?t.bgClass:""},[e("ul",[e("li",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkeds[a],expression:"checkeds[index]"}],staticClass:"checkbox",attrs:{type:"checkbox",name:"checkboxs",id:"check"+a},domProps:{checked:Array.isArray(t.checkeds[a])?t._i(t.checkeds[a],null)>-1:t.checkeds[a]},on:{click:function(s){t.clearAllChecked(a)},change:function(s){var e=t.checkeds[a],i=s.target,n=!!i.checked;if(Array.isArray(e)){var o=t._i(e,null);i.checked?o<0&&t.$set(t.checkeds,a,e.concat([null])):o>-1&&t.$set(t.checkeds,a,e.slice(0,o).concat(e.slice(o+1)))}else t.$set(t.checkeds,a,n)}}})]),t._v(" "),e("li",{staticClass:"book-info"},[e("div",{staticClass:"book-img"},[e("img",{attrs:{src:t.Img+s.headImg,alt:""}})]),t._v(" "),e("div",{staticClass:"book-desc"},[e("p",{staticClass:"book-name",domProps:{textContent:t._s(s.ptitle)},on:{click:function(e){t.showBook(s.pid)}}}),t._v(" "),e("p",[e("span",[t._v("作者：")]),e("span",{staticClass:"author",domProps:{textContent:t._s(s.pprovider)}})]),t._v(" "),e("p",[e("span",[t._v("出版社：")]),e("span",{domProps:{textContent:t._s(s.pfirm)}})])])]),t._v(" "),e("li",[e("span",{staticClass:"price",domProps:{textContent:t._s("￥"+s.pprice/100*.75)}})]),t._v(" "),e("li",[e("div",{staticClass:"num-box cart-box"},[e("span",{staticClass:"num-reduce iconfont",class:1==s.num?t.numClass:"",on:{click:function(s){t.numReduce(a)}}},[t._v("")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.number",value:s.num,expression:"item.num",modifiers:{number:!0}}],staticClass:"num-input",attrs:{type:"text "},domProps:{value:s.num},on:{blur:[function(s){t.checkNum(a)},function(s){t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(s,"num",t._n(e.target.value))}}}),t._v(" "),e("span",{staticClass:"num-add iconfont",on:{click:function(s){t.numAdd(a)}}},[t._v("")])])]),t._v(" "),e("li",[e("span",{staticClass:"sum",domProps:{textContent:t._s("￥"+s.num*s.pprice/100*.75)}})]),t._v(" "),e("li",[e("span",{staticClass:"del",on:{click:function(s){t.del(a)}}},[t._v("删除")])])])])}),t._v(" "),e("div",{staticClass:"footer-top"}),t._v(" "),e("div",{staticClass:"cart-footer"},[e("div",{staticClass:"footer-left"},[e("span",{staticClass:"footer-all-checked footer-nav"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedAll,expression:"checkedAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checkedAll)?t._i(t.checkedAll,null)>-1:t.checkedAll},on:{click:t.checkAll,change:function(s){var e=t.checkedAll,a=s.target,i=!!a.checked;if(Array.isArray(e)){var n=t._i(e,null);a.checked?n<0&&(t.checkedAll=e.concat([null])):n>-1&&(t.checkedAll=e.slice(0,n).concat(e.slice(n+1)))}else t.checkedAll=i}}}),t._v(" 全选\n        ")]),t._v(" "),e("span",{staticClass:"footer-nav",on:{click:t.selectedDel}},[t._v("\n          批量删除\n        ")]),t._v(" "),e("span",{staticClass:"choice footer-nav"},[t._v("\n          已选择"),e("b",{staticClass:"pro-num",domProps:{textContent:t._s(t.selectCount)}}),t._v("件商品\n        ")])]),t._v(" "),e("div",{staticClass:"footer-right"},[e("span",{staticClass:"pro-pay",class:t.selectCount>0?t.payClass:"",on:{click:t.payMoney}},[t._v("结算")]),t._v(" "),e("span",{staticClass:"pro-sum"},[t._v("\n          总计："),e("span",{staticClass:"all-sum",domProps:{textContent:t._s("￥"+t.sum)}})])])])],2):t._e(),t._v(" "),t.cartFlag?t._e():e("div",{staticClass:"cart-null"},[e("span",{staticClass:"iconfont cart-icon"},[t._v("")]),t._v(" "),e("span",{staticClass:"cart-info"},[t._v("您的购物车还是空的，赶快去挑选商品吧！")]),t._v(" "),e("span",{staticClass:"reminder"},[t._v("\n      去"),e("router-link",{attrs:{to:"/"}},[t._v("商城")]),t._v("首页逛逛吧\n    ")],1)])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("li",{staticClass:"book-info"},[s("span",[this._v("商品信息")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("span",[this._v("单价")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("span",[this._v("数量")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("span",[this._v("小计")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("span",[this._v("操作")])])}]};var J={components:{"header-top":u,"header-wrap":v,"right-nav":F,"book-show":e("C7Lr")(H,R,!1,function(t){e("KXV+")},"data-v-009e603e",null).exports}},U={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"cart"},[s("header-top"),this._v(" "),s("header-wrap"),this._v(" "),s("right-nav"),this._v(" "),s("book-show")],1)},staticRenderFns:[]};var B=e("C7Lr")(J,U,!1,function(t){e("EEos")},"data-v-4087d8c5",null).exports,j={props:["orderList"],data:function(){return{orderFlag:!0,status:[{info:"待付款"},{info:"待发货"},{info:"待收货"},{info:"已收货"}],statusChange:[{btn:"付款"},{btn:"延迟发货"},{btn:"确认收货"},{btn:"评价"}]}},methods:{orderDel:function(t,s){var e=this;this.axios.post(this.Home+"/api/v1/order/cancelOrder?outTradeNo="+t).then(function(t){t.data.data?e.orderList.splice(s,1):(JSON.parse(localStorage.getItem("myUser")||"[]").upwd="",e.$router.push("/login"))})},operator:function(t,s,e){var a=this;if(0==t){for(var i=this.orderList[e].relates,n=0,o=0;o<i.length;o++)n+=i[o].amount*i[o].pprice/100*.75;var r={total:n,sno:s};sessionStorage.setItem("item",c()(r)),this.$router.push("/pay")}else 1==t?alert("此功能还没实现"):2==t?this.axios.post(this.Home+"/api/v1/order/received?outTradeNo="+s).then(function(t){(console.log(t),t.data.data)?(a.orderList.splice(e,1),alert("已确认收货")):(JSON.parse(localStorage.getItem("myUser")||"[]").upwd="",a.$router.push("/login"))}):alert("此功能还没实现")}}},W={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"order-right"},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.orderFlag,expression:"this.$store.state.orderFlag"}],staticClass:"order-title"},[t._m(0)]),t._v(" "),t._l(t.orderList,function(s,a){return e("div",{key:s.outTradeNo,staticClass:"order-list"},[e("div",{staticClass:"list-header"},[e("div",{staticClass:"list-left"},[e("span",[t._v("订单编号： ")]),e("span",[t._v(t._s(s.outTradeNo))])]),t._v(" "),e("div",{staticClass:"list-left"},[e("span",[t._v("成交时间： ")]),e("span",[t._v(t._s(s.createTime)+" ")])])]),t._v(" "),t._l(s.relates,function(i){return e("div",{staticClass:"list-body"},[e("ul",[e("li",{staticClass:"book-info"},[e("div",{staticClass:"book-img"},[e("img",{attrs:{src:t.Img+i.headImg,alt:""}})]),t._v(" "),e("div",{staticClass:"book-desc"},[e("p",{staticClass:"book-name"},[t._v(t._s(i.ptitle))])])]),t._v(" "),e("li",{staticClass:"price"},[t._v("￥"+t._s(i.pprice/100*.75))]),t._v(" "),e("li",{staticClass:"num"},[t._v(t._s(i.amount))]),t._v(" "),e("li",{staticClass:"sum"},[t._v("￥"+t._s(i.amount*i.pprice/100*.75))]),t._v(" "),e("li",[t._v(t._s(t.status[s.status].info))]),t._v(" "),e("li",{staticClass:"status",on:{click:function(e){t.operator(s.status,s.outTradeNo,a)}}},[e("span",[t._v(t._s(t.statusChange[s.status].btn))])])])])}),t._v(" "),e("div",{staticClass:"address-section"},[e("ul",[e("li",[t._v("收货人："+t._s(s.address.name))]),t._v(" "),e("li",{staticClass:"section-addr"},[t._v("收货地址："+t._s(s.address.position))]),t._v(" "),e("li",[t._v("联系电话："+t._s(s.address.phone))]),t._v(" "),e("li",{staticClass:"delOrder"},[e("span",{directives:[{name:"show",rawName:"v-show",value:0==s.status||3==s.status,expression:"order.status==0 || order.status == 3"}],on:{click:function(e){t.orderDel(s.outTradeNo,a)}}},[t._v("删除订单")])])])])],2)}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!this.$store.state.orderFlag,expression:"!this.$store.state.orderFlag"}],staticClass:"orderInfo"},[e("span",{staticClass:"iconfont order-icon"},[t._v("")]),t._v(" "),e("span",{staticClass:"info"},[t._v("您还无此类的订单")]),t._v(" "),e("span",{staticClass:"reminder"},[t._v("\n      去"),e("router-link",{attrs:{to:"/"}},[t._v("商城")]),t._v("首页逛逛吧\n    ")],1)])],2)},staticRenderFns:[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",{staticClass:"product"},[t._v("商品信息")]),t._v(" "),e("li",{},[t._v("单价(元)")]),t._v(" "),e("li",{},[t._v("数量")]),t._v(" "),e("li",{},[t._v("实付款(元)")]),t._v(" "),e("li",{},[t._v("交易状态")]),t._v(" "),e("li",{},[t._v("操作")])])}]};var q=e("C7Lr")(j,W,!1,function(t){e("Yjgz")},"data-v-55d9b9a1",null).exports,D={components:{"order-right":q},created:function(){if(!JSON.parse(localStorage.getItem("myUser")||"[]").upwd){var t=this.$router.resolve("/login");window.open(t.href,"_blank")}this.getOrders(0)},data:function(){return{itemClass:"itemClass",haveBorderClass:"haveBorderClass",noBorderClass:"noBorderClass",index:1,orderList:[],itemFlag:!0,outTradeNo:[],itemList:[{itemIndex:1,content:"待付款"},{itemIndex:2,content:"待发货"},{itemIndex:3,content:"待收货"},{itemIndex:4,content:"已收货"}]}},methods:{showOrhide:function(){this.itemFlag=!this.itemFlag,this.$router.push("/order")},doFun:function(t){switch(t){case 1:this.noPay();break;case 2:this.hadPay();break;case 3:this.noReceive();break;case 4:this.hadReceive()}},goAddress:function(){this.$router.push("/order/address")},goPassword:function(){this.$router.push("/order/password")},noPay:function(){this.$router.push("/order"),this.itemFlag=!0,this.index=1,this.getOrders(0)},hadPay:function(){this.$router.push("/order"),this.itemFlag=!0,this.index=2,this.getOrders(1)},noReceive:function(){this.$router.push("/order"),this.itemFlag=!0,this.index=3,this.getOrders(2)},hadReceive:function(){this.$router.push("/order"),this.itemFlag=!0,this.index=4,this.getOrders(3)},getOrders:function(t){var s=this;this.orderList=[],this.axios.post(this.Home+"/api/v1/order/getOrders?status="+t).then(function(e){if(e.data.data){var a=e.data.data;if(a.length){s.$store.commit("setOrderFlag",!0);for(var i=0;i<a.length;i++){var n=a[i].outTradeNo;s.getOrder(n,t)}}else s.$store.commit("setOrderFlag",!1)}else{JSON.parse(localStorage.getItem("myUser")||"[]").upwd="",s.$router.push("/login")}})},getOrder:function(t,s){var e=this;this.axios.post(this.Home+"/api/v1/order/getOrder?outTradeNo="+t).then(function(t){t.data.data&&(e.orderList.push(t.data.data),e.orderList.status=s)})}}},z={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"my-order"},[e("div",{staticClass:"order-left"},[e("div",{staticClass:"mu-nav"},[e("div",{staticClass:"left-nav"},[e("div",{staticClass:"nav",class:1==t.itemFlag?t.noBorderClass:"",on:{click:t.showOrhide}},[e("span",[t._v("我的订单")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:!t.itemFlag,expression:"!itemFlag"}],staticClass:"iconfont"},[t._v("")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.itemFlag,expression:"itemFlag"}],staticClass:"iconfont"},[t._v("")])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.itemFlag,expression:"itemFlag"}],staticClass:"nav-item"},t._l(t.itemList,function(s){return e("ul",{key:s.itemIndex},[e("li",{class:s.itemIndex==t.index?t.itemClass:"",on:{click:function(e){t.doFun(s.itemIndex)}}},[e("span",[t._v(t._s(s.content))])])])}),0)]),t._v(" "),e("div",{staticClass:"left-nav"},[e("div",{staticClass:"nav",class:1==t.itemFlag?t.haveBorderClass:"",on:{click:t.goAddress}},[e("span",[t._v("地址管理")]),t._v(" "),e("span",{staticClass:"iconfont"},[t._v("")])])]),t._v(" "),e("div",{staticClass:"left-nav"},[e("div",{staticClass:"nav",on:{click:t.goPassword}},[e("span",[t._v("密码管理")]),t._v(" "),e("span",{staticClass:"iconfont"},[t._v("")])])])])]),t._v(" "),e("router-view",{attrs:{orderList:t.orderList}}),t._v(" "),e("div",{staticClass:"clear-fix"}),t._v(" "),e("div",{staticClass:"footer"})],1)},staticRenderFns:[]};var X={components:{"header-top":u,"header-wrap":v,"right-nav":F,"my-order":e("C7Lr")(D,z,!1,function(t){e("ijBV")},"data-v-049ccc8d",null).exports}},M={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"order"},[s("header-top"),this._v(" "),s("header-wrap"),this._v(" "),s("right-nav"),this._v(" "),s("my-order")],1)},staticRenderFns:[]};var V=e("C7Lr")(X,M,!1,function(t){e("4/OX")},"data-v-80567000",null).exports,Y={data:function(){return{addressFlag:!1,name:"",address:"",tel:"",addressList:[],positionFlag:!1,sureFlag:!0,aid:""}},created:function(){if(JSON.parse(localStorage.getItem("myUser")||"[]").upwd)this.getAllAddr();else{var t=this.$router.resolve("/login");window.open(t.href,"_blank")}},methods:{init:function(){this.name=this.address=this.tel=""},checkAddr:function(){},addAddress:function(){this.addressFlag=!0},getAllAddr:function(){var t=this;this.axios.post(this.Home+"/api/v1/user/getAllAddr").then(function(s){s.data&&(s.data.data.length?(t.addressList=s.data.data,t.positionFlag=!0):t.addressList=[])})},sureAddress:function(){var t=this,s=JSON.parse(localStorage.getItem("myUser")||"[]"),e=this.$qs.stringify({uemail:s.uemail,name:this.name,phone:this.tel,position:this.address});this.axios.post(this.Home+"/api/v1/user/addAddr",e).then(function(s){s.data.data&&(t.init(),t.addressFlag=!1,t.getAllAddr())})},cancel:function(){this.init(),this.addressFlag=!1},addressEdit:function(t,s){var e=this.addressList[s];this.name=e.name,this.tel=e.phone,this.address=e.position,this.sureFlag=!1,this.addressFlag=!0,this.aid=t},sureEditAddress:function(){var t=this,s=JSON.parse(localStorage.getItem("myUser")||"[]"),e=this.$qs.stringify({uemail:s.uemail,name:this.name,phone:this.tel,position:this.address});this.axios.post(this.Home+"/api/v1/user/addAddr",e).then(function(s){s.data&&(t.init(),t.addressFlag=!1,t.addressDel(this_.aid))})},addressDel:function(t){var s=this;this.axios.post(this.Home+"/api/v1/user/delAddr?aid="+t).then(function(t){t.data&&s.getAllAddr()})}}},G={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"order-address"},[e("div",{staticClass:"address-right"},[e("h1",{staticClass:"address-title"},[t._v("地址管理")]),t._v(" "),e("div",{staticClass:"address-edit"},[e("button",{staticClass:"address-btn",on:{click:t.addAddress}},[e("span",{staticClass:"iconfont"},[t._v("")]),t._v(" "),e("span",[t._v("添加新地址")])]),t._v(" "),t.addressFlag?e("div",{staticClass:"address-wrapper"},[e("p",{staticClass:"address-name address-style"},[t._m(0),t._v(" "),e("span",{staticClass:"name-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"text",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(s){s.target.composing||(t.name=s.target.value)}}})])]),t._v(" "),e("p",{staticClass:"address-name address-style"},[t._m(1),t._v(" "),e("span",{staticClass:"name-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tel,expression:"tel"}],staticClass:"text",attrs:{type:"text"},domProps:{value:t.tel},on:{input:function(s){s.target.composing||(t.tel=s.target.value)}}})])]),t._v(" "),e("p",{staticClass:"address-name address-style"},[t._m(2),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"textarea",attrs:{cols:"90",rows:"4"},domProps:{value:t.address},on:{input:function(s){s.target.composing||(t.address=s.target.value)}}})]),t._v(" "),e("div",{staticClass:"clear-fix"}),t._v(" "),e("p",{staticClass:"address-name address-style"},[e("button",{directives:[{name:"show",rawName:"v-show",value:t.sureFlag,expression:"sureFlag"}],staticClass:"sure-btn btn",on:{click:t.sureAddress}},[t._v("确认地址")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:!t.sureFlag,expression:"!sureFlag"}],staticClass:"sure-btn btn",on:{click:t.sureEditAddress}},[t._v("修改地址")]),t._v(" "),e("button",{staticClass:"cancel-btn btn",on:{click:t.cancel}},[t._v("取消")])])]):t._e()])]),t._v(" "),t._l(t.addressList,function(s,a){return t.positionFlag?e("div",{key:a,staticClass:"address-section"},[e("ul",[e("li",{domProps:{textContent:t._s(s.name)}}),t._v(" "),e("li",{staticClass:"section-addr",domProps:{textContent:t._s(s.position)}}),t._v(" "),e("li",{domProps:{textContent:t._s(s.phone)}}),t._v(" "),e("li",{staticClass:"operator"},[e("span",{on:{click:function(e){t.addressEdit(s.aid,a)}}},[t._v("编辑")]),t._v(" "),e("span",{on:{click:function(e){t.addressDel(s.aid)}}},[t._v("删除")])])])]):t._e()})],2)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"name"},[this._v("收货人： "),s("i",{staticClass:"start"},[this._v("*")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"name"},[this._v("电话号码： "),s("i",{staticClass:"start"},[this._v("*")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"name"},[this._v("收货地址： "),s("i",{staticClass:"start"},[this._v("*")])])}]};var K=e("C7Lr")(Y,G,!1,function(t){e("gW/J")},"data-v-3af1eea7",null).exports,Q={data:function(){return{infoFlag:!1,psw1:"",psw2:"",info:"",code:"",count:0,verifyInfo:"获取验证码",tipFlag:!1}},created:function(){if(JSON.parse(localStorage.getItem("myUser")||"[]").upwd);else{var t=this.$router.resolve("/login");window.open(t.href,"_blank")}},methods:{checkPsw:function(){var t=this;if(this.psw1&&this.psw2)if(this.psw1!=this.psw2)this.info="两次密码输入不一致",this.infoFlag=!0;else if(this.code){this.infoFlag=!1;var s=JSON.parse(localStorage.getItem("myUser")||"[]"),e=this.$qs.stringify({uemail:s.uemail,upwd:this.psw2,emailCode:this.code});this.axios.post(this.Home+"/api/v1/user/changePwd",e).then(function(s){(console.log(s),s.data.data.data)?(t.tipFlag=!0,setTimeout(function(){t.tipFlag=!1,t.psw1=t.psw2=t.code=""},3e3)):(JSON.parse(localStorage.getItem("myUser")||"[]").upwd="",t.$router.push("/login"))})}else this.info="验证码不能为空";else this.info="密码输入不能为空",this.infoFlag=!0},sendEmailCode:function(){var t=JSON.parse(localStorage.getItem("myUser")||"[]"),s=this.$qs.stringify({uemail:t.uemail});this.axios.post(this.Home+"/api/v1/user/sendEmailCode",s).then(function(t){})},getCode:function(){if(0==this.count){this.count=90,this.sendEmailCode();var t=this,s=setInterval(function(){0==t.count?(clearInterval(s),t.verifyInfo="获取验证码"):(t.count--,t.verifyInfo=t.count+"s重新获取")},1e3)}}}},Z={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"password-wrapper"},[e("div",{staticClass:"password-heder"},[t._v("\n    密码设置\n  ")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.tipFlag,expression:"tipFlag"}],staticClass:"tip-info"},[e("span",[t._v("修改成功")])]),t._v(" "),e("div",{staticClass:"password-form"},[e("div",{staticClass:"password-content"},[e("p",[e("span",{staticClass:"psw"},[t._v("新密码")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.psw1,expression:"psw1"}],staticClass:"text",attrs:{type:"password"},domProps:{value:t.psw1},on:{input:function(s){s.target.composing||(t.psw1=s.target.value)}}})]),t._v(" "),e("p",[e("span",{staticClass:"psw"},[t._v("确认密码")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.psw2,expression:"psw2"}],staticClass:"text",attrs:{type:"password"},domProps:{value:t.psw2},on:{input:function(s){s.target.composing||(t.psw2=s.target.value)}}})]),t._v(" "),e("p",[e("span",{staticClass:"verify"},[t._v("邮箱验证码")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"verify-text",attrs:{type:"text"},domProps:{value:t.code},on:{input:function(s){s.target.composing||(t.code=s.target.value)}}}),t._v(" "),e("button",{staticClass:"verify-btn",domProps:{textContent:t._s(t.verifyInfo)},on:{click:t.getCode}})]),t._v(" "),e("button",{staticClass:"btn",on:{click:t.checkPsw}},[t._v("确认")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.infoFlag,expression:"infoFlag"}],staticClass:"info",domProps:{textContent:t._s(t.info)}})])])])},staticRenderFns:[]};var tt=e("C7Lr")(Q,Z,!1,function(t){e("6XTM")},"data-v-2fcb7186",null).exports,st={created:function(){var t=JSON.parse(localStorage.getItem("myUser")||"[]");t&&t.uemail&&(this.username=t.uemail)},data:function(){return{focusClass:"focusClass",focusFlag:0,userFlag:!1,pswFlag:!1,username:"",password:"",pswInfo:"密码不为空"}},methods:{goHome:function(){this.$router.push("/")},focusStyle1:function(){this.focusFlag=1},focusStyle2:function(){this.focusFlag=2},blurStyle:function(){this.focusFlag=0},checkInfo:function(){this.username.length?this.userFlag=!1:this.userFlag=!0,this.password.length?this.pswFlag=!1:this.pswFlag=!0},userLogin:function(){if(this.checkInfo(),this.userFlag||this.pswFlag);else{var t=this.username,s=this.password,e=this.$qs.stringify({uemail:t,upwd:s}),a=this;this.axios.post(this.Home+"/api/v1/user/login",e).then(function(t){if(t.data.data){var s=t.data.data;localStorage.setItem("myUser",c()(s)),a.$router.push("/")}else a.pswInfo="账户或密码错误",a.pswFlag=!0})}}}},et={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"login-wrapper"},[e("div",{staticClass:"login-header"},[e("div",{staticClass:"logo",on:{click:t.goHome}},[e("span",{staticClass:"iconfont iconfont-logo"},[t._v("")]),t._v(" "),e("span",{staticClass:"store"},[t._v("书 城")])])]),t._v(" "),e("div",{staticClass:"clear-fix"}),t._v(" "),e("div",{staticClass:"login-content"},[e("div",{staticClass:"login-box"},[e("div",{staticClass:"div-box"},[e("p",{staticClass:"box-title"},[t._v("密码登录")]),t._v(" "),e("div",{staticClass:"username",class:1==t.focusFlag?t.focusClass:""},[e("span",{staticClass:"iconfont"},[t._v("")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"text",attrs:{type:"text",placeholder:"username"},domProps:{value:t.username},on:{focus:t.focusStyle1,blur:t.blurStyle,input:function(s){s.target.composing||(t.username=s.target.value)}}})]),t._v(" "),e("p",{staticClass:"info"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.userFlag,expression:"userFlag"}]},[t._v("账户不为空")])]),t._v(" "),e("div",{staticClass:"password",class:2==t.focusFlag?t.focusClass:""},[e("span",{staticClass:"iconfont psw-icon"},[t._v("")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"text",attrs:{type:"password",placeholder:"password"},domProps:{value:t.password},on:{keyup:function(s){return"button"in s||!t._k(s.keyCode,"enter",13,s.key,"Enter")?t.userLogin(s):null},focus:t.focusStyle2,blur:t.blurStyle,input:function(s){s.target.composing||(t.password=s.target.value)}}})]),t._v(" "),e("p",{staticClass:"info"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.pswFlag,expression:"pswFlag"}],domProps:{textContent:t._s(t.pswInfo)}})]),t._v(" "),e("button",{staticClass:"login-btn",on:{click:t.userLogin}},[t._v("登录")]),t._v(" "),e("div",{staticClass:"box-footer"},[e("router-link",{staticClass:"register",attrs:{to:"/register",tag:"span"}},[t._v("立即注册")]),t._v(" "),e("span",{staticClass:"forget-psw"},[t._v("忘记密码？")])],1)])])])])},staticRenderFns:[]};var at=e("C7Lr")(st,et,!1,function(t){e("pFiP")},"data-v-35c4aa06",null).exports,it={data:function(){return{focusClass:"focusClass",focusFlag:0,userFlag:!1,pswFlag:!1,sanmeFlag:"",mailFlag:!1,verifyFlag:!1,username:"",password:"",password2:"",email:"",verify:"",emailInfo:"邮箱格式不正确",pwdInfo:"密码由4-12位字符组成",verifyCodeInfo:"验证码不能为空",verifyInfo:"获取验证码",count:0,verifyTimer:null}},destroyed:function(){null!=this.verifyTimer&&(clearInterval(this.verifyTimer),this.verifyTimer=null)},methods:{goHome:function(){this.$router.push("/")},focusStyle1:function(){this.focusFlag=1},focusStyle2:function(){this.focusFlag=2},focusStyle3:function(){this.focusFlag=3},focusStyle4:function(){this.focusFlag=4},focusStyle5:function(){this.focusFlag=5},blurStyle:function(){this.focusFlag=0},checkInfo:function(){var t=this.email.length;t<6||t>18||/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/.test(this.email)?this.mailFlag=!0:this.mailFlag=!1,this.password.length<4||this.password.length>12?this.pswFlag=!0:this.pswFlag=!1,this.password!=this.password2?this.sanmeFlag=!0:this.sanmeFlag=!1,this.verify.length?this.verifyFlag=!1:(this.verifyCodeInfo="验证码不能为空",this.verifyFlag=!0)},sendEmailCode:function(){var t=this.email,s=this.$qs.stringify({uemail:t});this.axios.post(this.Home+"/api/v1/user/sendEmailCode",s).then(function(t){})},getCode:function(){var t=this.email.length;if(t<6||t>18||/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/.test(this.email)?this.mailFlag=!0:this.mailFlag=!1,0==this.count&&!this.mailFlag){this.count=90;var s=this;this.sendEmailCode(),this.verifyTimer=setInterval(function(){0==s.count?(clearInterval(s.verifyTimer),s.verifyInfo="获取验证码"):(s.count--,s.verifyInfo=s.count+"s重新获取")},1e3)}},checkUemail:function(){var t=this;this.axios.post(this.Home+"/api/v1/user/checkUemail?uemail="+this.email).then(function(s){s.data&&(t.emailInfo="该邮箱已被注册过",t.mailFlag=!0)})},userRegister:function(){var t=this;if(this.checkInfo(),this.pswFlag||this.sanmeFlag||this.mailFlag||this.verifyFlag);else if(this.checkUemail(),!this.mailFlag){var s=this.$qs.stringify({uemail:this.email,uname:this.username,upwd:this.password,emailCode:this.verify});this.axios.post(this.Home+"/api/v1/user/register",s).then(function(s){s.data.data?t.$router.push("/login"):t.verifyCodeInfo="验证码错误"})}}}},nt={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"login-wrapper"},[e("div",{staticClass:"login-header"},[e("div",{staticClass:"logo",on:{click:t.goHome}},[e("span",{staticClass:"iconfont iconfont-logo"},[t._v("")]),t._v(" "),e("span",{staticClass:"store"},[t._v("书 城")])])]),t._v(" "),e("div",{staticClass:"clear-fix"}),t._v(" "),e("div",{staticClass:"login-content"},[e("div",{staticClass:"login-box"},[e("div",{staticClass:"div-box"},[e("p",{staticClass:"box-title"},[t._v("用户注册")]),t._v(" "),e("div",{staticClass:"email",class:4==t.focusFlag?t.focusClass:""},[e("span",{staticClass:"iconfont"},[t._v("")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"text",attrs:{type:"text",placeholder:"用户名为qq邮箱"},domProps:{value:t.email},on:{focus:t.focusStyle4,blur:t.blurStyle,input:function(s){s.target.composing||(t.email=s.target.value)}}})]),t._v(" "),e("p",{staticClass:"info"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.mailFlag,expression:"mailFlag"}]},[t._v(t._s(t.emailInfo))])]),t._v(" "),e("div",{staticClass:"username",class:1==t.focusFlag?t.focusClass:""},[e("span",{staticClass:"iconfont"},[t._v("")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"text",attrs:{type:"text",placeholder:"昵称"},domProps:{value:t.username},on:{focus:t.focusStyle1,blur:t.blurStyle,input:function(s){s.target.composing||(t.username=s.target.value)}}})]),t._v(" "),e("p",{staticClass:"info"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.userFlag,expression:"userFlag"}]})]),t._v(" "),e("div",{staticClass:"password",class:2==t.focusFlag?t.focusClass:""},[e("span",{staticClass:"iconfont psw-icon"},[t._v("")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"text",attrs:{type:"password",placeholder:"密码由4-12位字符组成"},domProps:{value:t.password},on:{focus:t.focusStyle2,blur:t.blurStyle,input:function(s){s.target.composing||(t.password=s.target.value)}}})]),t._v(" "),e("p",{staticClass:"info"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.pswFlag,expression:"pswFlag"}]},[t._v(t._s(t.pwdInfo))])]),t._v(" "),e("div",{staticClass:"password",class:3==t.focusFlag?t.focusClass:""},[e("span",{staticClass:"iconfont psw-icon"},[t._v("")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password2,expression:"password2"}],staticClass:"text",attrs:{type:"password",placeholder:"确认密码"},domProps:{value:t.password2},on:{focus:t.focusStyle3,blur:t.blurStyle,input:function(s){s.target.composing||(t.password2=s.target.value)}}})]),t._v(" "),e("p",{staticClass:"info"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.sanmeFlag,expression:"sanmeFlag"}]},[t._v("密码不一致")])]),t._v(" "),e("div",{staticClass:"verify"},[e("span",[t._v("邮箱验证码")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.verify,expression:"verify"}],staticClass:"verify-text",class:5==t.focusFlag?t.focusClass:"",attrs:{type:"text"},domProps:{value:t.verify},on:{focus:t.focusStyle5,blur:t.blurStyle,input:function(s){s.target.composing||(t.verify=s.target.value)}}}),t._v(" "),e("button",{staticClass:"verify-btn",domProps:{textContent:t._s(t.verifyInfo)},on:{click:t.getCode}})]),t._v(" "),e("p",{staticClass:"info"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.verifyFlag,expression:"verifyFlag"}],domProps:{textContent:t._s(t.verifyCodeInfo)}})]),t._v(" "),e("button",{staticClass:"login-btn",on:{click:t.userRegister}},[t._v("注册")]),t._v(" "),e("div",{staticClass:"box-footer"},[e("span",{staticClass:"user-login"},[t._v("已有账号？"),e("router-link",{attrs:{to:"/login",tag:"span"}},[t._v("请登录")])],1)])])])])])},staticRenderFns:[]};var ot=e("C7Lr")(it,nt,!1,function(t){e("iPsu")},"data-v-46384656",null).exports,rt=e("a3Yh"),ct=e.n(rt),lt={data:function(){var t;return t={addrClass:"addrClass",addrIndex:0,addressFlag:!1,name:"",tel:"",address:"",aid:"",pids:[],pamount:[],addrDivFlag:!0,addressList:[],itemList:[],count:0,total:0},ct()(t,"pids",[]),ct()(t,"pamount",[]),t},created:function(){this.getAllAddr(),this.getitemList()},methods:{setTotal:function(){for(var t=0;t<this.count;t++)this.total+=this.itemList[t].num*this.itemList[t].pprice/100*.75,this.pids.push(this.itemList[t].pid),this.pamount.push(this.itemList[t].num)},getitemList:function(){this.itemList=JSON.parse(sessionStorage.getItem("itemList")||"[]"),this.count=this.itemList.length,this.setTotal()},changeAddr:function(t){this.addrIndex=t,this.aid=this.addressList[t].aid},addAddress:function(){this.addressFlag=!this.addressFlag},sureAddress:function(){var t=JSON.parse(localStorage.getItem("myUser")||"[]"),s=this.$qs.stringify({uemail:t.uemail,name:this.name,phone:this.tel,position:this.address}),e=this;this.axios.post(this.Home+"/api/v1/user/addAddr",s).then(function(t){t.data&&(e.name=e.tel=e.address="",e.addressFlag=!1,e.getAllAddr())})},cancel:function(){this.name=this.tel=this.address="",this.addressFlag=!1},getAllAddr:function(){var t=this,s=this;this.axios.post(this.Home+"/api/v1/user/getAllAddr").then(function(e){if(console.log(e),e.data.data)e.data.data.length?(s.addressList=e.data.data,s.addrDivFlag=!0,s.aid=s.addressList[0].aid):(s.addressList=[],s.addrDivFlag=!1);else{alert("请重新登录");var a=t.$router.resolve("/login");window.open(a.href,"_blank")}})},payMoney:function(){if(this.addrDivFlag){var t=this;this.axios.post(this.Home+"/api/v1/order/add?pids="+this.pids+"&pamount="+this.pamount+"&aid="+this.aid).then(function(s){if(console.log(s),s.data.data){var e={total:t.total,sno:s.data.data};sessionStorage.setItem("item",c()(e)),t.$router.push("/pay")}else{JSON.parse(localStorage.getItem("myUser")||"[]").upwd="",t.$router.push("/login")}})}else alert("请添加收货地址")}}},dt={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"book-buy"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.addrDivFlag,expression:"addrDivFlag"}],staticClass:"addr-div"},[e("h1",{staticClass:"pinfo"},[t._v("收货人信息")]),t._v(" "),t._l(t.addressList,function(s,a){return e("div",{key:s.aid,staticClass:"addr-list",on:{click:function(s){t.changeAddr(a)}}},[e("ul",[e("li",{staticClass:"addr-li",class:t.addrIndex==a?t.addrClass:""},[e("h1",{staticClass:"addr-header"},[e("span",{domProps:{textContent:t._s(s.name)}}),t._v(" "),e("span",{staticClass:"tel",domProps:{textContent:t._s(s.phone)}})]),t._v(" "),e("p",{staticClass:"addr",domProps:{textContent:t._s(s.position)}})])])])}),t._v(" "),e("div",{staticClass:"clear-fix"})],2),t._v(" "),e("button",{staticClass:"address-btn",on:{click:t.addAddress}},[e("span",{staticClass:"iconfont"},[t._v("")]),t._v(" "),e("span",[t._v("添增收货地址")])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.addressFlag,expression:"addressFlag"}],staticClass:"address-wrapper"},[e("p",{staticClass:"address-name address-style"},[t._m(0),t._v(" "),e("span",{staticClass:"name-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"text",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(s){s.target.composing||(t.name=s.target.value)}}})])]),t._v(" "),e("p",{staticClass:"address-name address-style"},[t._m(1),t._v(" "),e("span",{staticClass:"name-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tel,expression:"tel"}],staticClass:"text",attrs:{type:"text"},domProps:{value:t.tel},on:{input:function(s){s.target.composing||(t.tel=s.target.value)}}})])]),t._v(" "),e("p",{staticClass:"address-name address-style"},[t._m(2),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"textarea",attrs:{cols:"90",rows:"4"},domProps:{value:t.address},on:{input:function(s){s.target.composing||(t.address=s.target.value)}}})]),t._v(" "),e("div",{staticClass:"clear-fix"}),t._v(" "),e("p",{staticClass:"address-name address-style"},[e("button",{staticClass:"sure-btn btn",on:{click:t.sureAddress}},[t._v("确认地址")]),t._v(" "),e("button",{staticClass:"cancel-btn btn",on:{click:t.cancel}},[t._v("取消")])])]),t._v(" "),e("div",{staticClass:"pro-div"},[e("h1",{staticClass:"pinfo"},[t._v("商品清单")]),t._v(" "),e("div",{staticClass:"pro-order"},[t._m(3),t._v(" "),t._l(t.itemList,function(s){return e("div",{staticClass:"pro-list"},[e("ul",[e("li",{staticClass:"book-info"},[e("div",{staticClass:"book-img"},[e("img",{attrs:{src:t.Img+s.headImg,alt:""}})]),t._v(" "),e("div",{staticClass:"book-desc"},[e("p",{staticClass:"book-name",domProps:{textContent:t._s(s.ptitle)}}),t._v(" "),e("p",[e("span",[t._v("作者：")]),e("span",{staticClass:"author",domProps:{textContent:t._s(s.pprovider)}})]),t._v(" "),e("p",[e("span",[t._v("出版社：")]),e("span",{domProps:{textContent:t._s(s.pfirm)}})])])]),t._v(" "),e("li",[e("span",{staticClass:"price",domProps:{textContent:t._s("￥"+s.pprice/100*.75)}})]),t._v(" "),e("li",[e("span",{staticClass:"bun",domProps:{textContent:t._s(s.num)}})]),t._v(" "),e("li",[e("span",{staticClass:"sum",domProps:{textContent:t._s("￥"+s.num*s.pprice/100*.75)}})])])])}),t._v(" "),e("div",{staticClass:"footer-box"},[t._v("\n        共"),e("span",{staticClass:"footer-num",domProps:{textContent:t._s(t.count)}}),t._v("件商品\n        "),e("span",{staticClass:"pay-size"},[t._v("应付金额："),e("span",{staticClass:"footer-price",domProps:{textContent:t._s(t.total)}})]),t._v(" "),e("button",{staticClass:"pay-btn",on:{click:t.payMoney}},[t._v("去支付")])])],2)])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"name"},[this._v("收货人： "),s("i",{staticClass:"start"},[this._v("*")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"name"},[this._v("电话号码： "),s("i",{staticClass:"start"},[this._v("*")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"name"},[this._v("收货地址： "),s("i",{staticClass:"start"},[this._v("*")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"pro-wrap"},[s("ul",[s("li",{staticClass:"book-info"},[s("span",[this._v("商品信息")])]),this._v(" "),s("li",[s("span",[this._v("单价")])]),this._v(" "),s("li",[s("span",[this._v("数量")])]),this._v(" "),s("li",[s("span",[this._v("总价")])])])])}]};var ut={components:{"header-top":u,"header-wrap":v,"book-buy":e("C7Lr")(lt,dt,!1,function(t){e("cuu3")},"data-v-c6b9390a",null).exports,"right-nav":F}},pt={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"buy"},[s("header-top"),this._v(" "),s("header-wrap"),this._v(" "),s("book-buy"),this._v(" "),s("right-nav")],1)},staticRenderFns:[]};var vt=e("C7Lr")(ut,pt,!1,function(t){e("F+OV")},"data-v-47654226",null).exports,ht={data:function(){return{codeFlag:!1,infoFlag:!1,total:"",sno:"",mysrc:"",payFlag:!1}},created:function(){this.getItem()},methods:{getItem:function(){var t=JSON.parse(sessionStorage.getItem("item")||"[]");t.total&&t.sno?(this.total=t.total,this.sno=t.sno):this.$router.push("/")},getSecondCode:function(){var t=this;this.axios.get(this.Home+"/api/v1/order/wechat/code?outTradeNo="+t.sno).then(function(s){if(s.data){t.mysrc=t.Home+"/api/v1/order/wechat/code?outTradeNo="+t.sno,t.codeFlag=!0;var e=null;e=setInterval(function(){t.whetherOrNotToPay(),t.payFlag&&(clearInterval(e),t.codeFlag=!1,t.infoFlag=!0)},2e3)}})},whetherOrNotToPay:function(){var t=this;this.axios.post(this.Home+"/api/v1/order/whetherOrNotToPay?outTradeNo="+this.sno).then(function(s){s.data.data&&(t.payFlag=!0)})}}},mt={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"pay-money"},[e("div",{staticClass:"pay-logo"},[e("router-link",{staticClass:"logo",attrs:{to:"/",tag:"div"}},[e("span",{staticClass:"iconfont iconfont-logo"},[t._v("")]),e("span",{staticClass:"store"},[t._v("书\n        城")])])],1),t._v(" "),e("div",{staticClass:"pay-content"},[e("div",{staticClass:"pay-price"},[e("p",{staticClass:"fl"},[e("span",[t._v("支付金额：")]),e("span",{staticClass:"price"},[t._v("￥"+t._s(t.total))])]),t._v(" "),e("p",{staticClass:"fl"},[e("span",[t._v("订单号：")]),e("span",{staticClass:"sno"},[t._v(t._s(t.sno))])])]),t._v(" "),e("div",{staticClass:"pay-way"},[e("h1",[t._v("支付方式")]),t._v(" "),t._m(0),t._v(" "),e("button",{staticClass:"pay-btn",on:{click:t.getSecondCode}},[t._v("立即支付")])]),t._v(" "),t.infoFlag?e("div",{staticClass:"info"},[e("p",[e("span",{staticClass:"pay-success"},[t._v("支付成功")]),t._v(" "),e("span",[t._v("返回\n          "),e("router-link",{attrs:{to:"/",tag:"a"}},[t._v("首页")])],1)])]):t._e()]),t._v(" "),t.codeFlag?e("div",{staticClass:"second-code"},[e("img",{attrs:{src:t.mysrc,alt:"付款二维码"}})]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"way-img"},[s("img",{attrs:{src:"http://112.74.39.181:1453/img/WePayLogo.png",alt:""}})])}]};var ft={components:{"header-top":u,"pay-money":e("C7Lr")(ht,mt,!1,function(t){e("IXan")},"data-v-81693c50",null).exports}},_t={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"pay"},[s("header-top"),this._v(" "),s("pay-money")],1)},staticRenderFns:[]};var gt=e("C7Lr")(ft,_t,!1,function(t){e("cXe9")},"data-v-ef5a29e8",null).exports,Ct={data:function(){return{pageIndex:1,pageClass:"pageClass",words:"",keyWords:"",pageNum:1,pages:1,list:[],pagationFlag:!1}},created:function(){this.keyWords=this.$store.state.keyWords,this.getPage()},methods:{showBookInfo:function(t){var s=this.$router.resolve({path:"/detail",query:{pid:t}});window.open(s.href,"_blank")},getPage:function(){var t=this,s=this.$qs.stringify({ptitle:this.keyWords,pageNum:this.pageNum});this.axios.post(this.Home+"/api/v1/product/search",s).then(function(s){s.data.data.list.length?(t.list=s.data.data.list,t.pages=s.data.data.pages,t.pagationFlag=!0):(t.list=[],t.pages=0,t.pagationFlag=!1,t.words=t.keyWords)})},changePage:function(t){this.pageIndex=t,this.pageNum=t,this.getPage()},pre:function(){this.pageNum>1&&(this.pageNum--,this.pageIndex=this.pageNum,this.getPage())},next:function(){this.pageNum<this.pages&&(this.pageNum++,this.pageIndex=this.pageNum,this.getPage())}}},wt={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"header-wrap"},[e("div",{staticClass:"wrap"},[e("router-link",{staticClass:"logo",attrs:{to:"/",tag:"div"}},[e("span",{staticClass:"iconfont iconfont-logo"},[t._v("")]),e("span",{staticClass:"store"},[t._v("书\n          城")])]),t._v(" "),e("div",{staticClass:"search-nav"},[e("div",{staticClass:"search-content"},[e("div",{staticClass:"search"},[e("span",{staticClass:"iconfont iconfont-search"},[t._v("")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyWords,expression:"keyWords"}],staticClass:"search-form",attrs:{type:"text",placeholder:"关键词",maxlength:"50"},domProps:{value:t.keyWords},on:{keyup:function(s){return"button"in s||!t._k(s.keyCode,"enter",13,s.key,"Enter")?t.getPage(s):null},input:function(s){s.target.composing||(t.keyWords=s.target.value)}}}),t._v(" "),e("button",{staticClass:"btn-search",attrs:{type:"button"},on:{click:t.getPage}},[t._v("搜 索")])])])])],1)]),t._v(" "),e("div",{staticClass:"main-content"},[e("div",{staticClass:"content"},[t._m(0),t._v(" "),e("div",{staticClass:"content-books"},[e("ul",t._l(t.list,function(s){return e("li",{key:s.pid,staticClass:"book-li",on:{click:function(e){t.showBookInfo(s.pid)}}},[e("img",{staticClass:"book-img",attrs:{src:t.Img+s.headImg,alt:""}}),t._v(" "),e("p",{staticClass:"book-name"},[t._v(t._s(s.ptitle))]),t._v(" "),e("p",{staticClass:"author"},[t._v("作者 "+t._s(s.pprovider)+" ")]),t._v(" "),e("p",{staticClass:"price"},[e("span",[e("span",{staticClass:"price-size"},[t._v("￥")]),t._v(" "),e("span",{staticClass:"how-price"},[t._v(t._s(s.pprice/100*.75))])]),t._v(" "),e("span",{staticClass:"rob"},[e("span",{staticClass:"price-size"},[t._v("￥")]),t._v(" "),e("span",[t._v(t._s(s.pprice/100))])])])])}),0),t._v(" "),e("div",{staticClass:"clear-fix"}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.pagationFlag,expression:"pagationFlag"}],staticClass:"pagation"},[e("ul",[e("li",{staticClass:"pre",on:{click:t.pre}},[t._v("pre")]),t._v(" "),t._l(t.pages,function(s){return e("li",{key:s,staticClass:"pageNum",class:t.pageIndex==s?t.pageClass:"",on:{click:function(e){t.changePage(s)}}},[t._v(t._s(s))])}),t._v(" "),e("li",{staticClass:"next",on:{click:t.next}},[t._v("next")])],2)])])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.pages<1,expression:"pages < 1"}],staticClass:"no-found"},[e("p",[t._v('抱歉，没有找不到与 "'),e("span",[t._v(t._s(t.words))]),t._v('" 相关的商品')])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"content-title"},[s("div",{staticClass:"category"},[s("span",[this._v("全部商品")])])])}]};var yt={components:{"header-top":u,search:e("C7Lr")(Ct,wt,!1,function(t){e("vp3U")},"data-v-66453dc7",null).exports,"right-nav":F}},kt={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"search"},[s("header-top"),this._v(" "),s("search"),this._v(" "),s("right-nav")],1)},staticRenderFns:[]};var bt=e("C7Lr")(yt,kt,!1,function(t){e("CHCQ")},"data-v-704a823f",null).exports;a.a.use(o.a);var xt=new o.a({routes:[{path:"/",name:"Home",component:L,meta:{title:"网上商城"}},{path:"/detail",name:"Detail",component:T,meta:{title:"商品详情"}},{path:"/cart",name:"Cart",component:B,meta:{title:"购物车"}},{path:"/buy",name:"Buy",component:vt,meta:{title:"商品购买"}},{path:"/pay",name:"Pay",component:gt,meta:{title:"商品支付"}},{path:"/order",name:"Order",component:V,children:[{path:"/order",name:"OrderList",component:q,meta:{title:"我的订单"}},{path:"address",name:"Address",component:K,meta:{title:"地址管理"}},{path:"password",name:"Password",component:tt,meta:{title:"密码管理"}}]},{path:"/search",name:"Search",component:bt,meta:{title:"商品搜索"}},{path:"/login",name:"Login",component:at,meta:{title:"登录"}},{path:"/register",name:"Register",component:ot,meta:{title:"注册"}}]});xt.beforeEach(function(t,s,e){t.meta.title&&(document.title=t.meta.title),e()});var Ft=xt,$t=e("9rMa");a.a.use($t.a);var It=new $t.a.Store({state:{count:0,orderFlag:!0,keyWords:"",itemList:[],pageNum:1,pages:"",hotList:[]},mutations:{getCount:function(t){return t.count},setCount:function(t,s){t.count=s},setOrderFlag:function(t,s){t.orderFlag=s},setKeyWords:function(t,s){t.keyWords=s},setItemlist:function(t,s){t.itemList=s},setHotList:function(t,s){t.hotList=s}}}),Lt=e("aozt"),Nt=e.n(Lt),At=e("Wn42"),St=e.n(At),Pt=e("3khs"),Et=e.n(Pt);e("9n10"),e("TzC8"),e("aEDl"),e("slWF");Nt.a.defaults.withCredentials=!0,a.a.prototype.$qs=St.a,a.a.config.productionTip=!1,a.a.prototype.Home="http://112.74.39.181:1452",a.a.prototype.Img="http://112.74.39.181:1453/img/",a.a.use(Et.a,Nt.a),new a.a({el:"#app",router:Ft,store:It,components:{App:n},template:"<App/>"})},TzC8:function(t,s){},UGy7:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.slideClass},[this._t("default")],2)},staticRenderFns:[]},i=e("C7Lr")({name:"swiper-slide",data:function(){return{slideClass:"swiper-slide"}},ready:function(){this.update()},mounted:function(){this.update(),this.$parent.options.slideClass&&(this.slideClass=this.$parent.options.slideClass)},updated:function(){this.update()},attached:function(){this.update()},methods:{update:function(){this.$parent&&this.$parent.swiper&&this.$parent.swiper.update&&(this.$parent.swiper.update(!0),this.$parent.options.loop&&this.$parent.swiper.reLoop())}}},a,!1,null,null,null);s.default=i.exports},W9a1:function(t,s){},YYgg:function(t,s){},Yjgz:function(t,s){},aEDl:function(t,s){},cXe9:function(t,s){},cuu3:function(t,s){},"gW/J":function(t,s){},gXPG:function(t,s){},gvfg:function(t,s){},i8eD:function(t,s){},iPsu:function(t,s){},ijBV:function(t,s){},nV8p:function(t,s){},pFiP:function(t,s){},slWF:function(t,s){},syvT:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a="undefined"!=typeof window;a&&(window.Swiper=e("Bnvi"));var i={name:"swiper",props:{options:{type:Object,default:function(){return{autoplay:3500}}},notNextTick:{type:Boolean,default:function(){return!1}}},data:function(){return{defaultSwiperClasses:{wrapperClass:"swiper-wrapper"}}},ready:function(){!this.swiper&&a&&(this.swiper=new Swiper(this.$el,this.options))},mounted:function(){var t=this,s=function(){if(!t.swiper&&a){delete t.options.notNextTick;var s=!1;for(var e in t.defaultSwiperClasses)t.defaultSwiperClasses.hasOwnProperty(e)&&t.options[e]&&(s=!0,t.defaultSwiperClasses[e]=t.options[e]);var i=function(){t.swiper=new Swiper(t.$el,t.options)};s?t.$nextTick(i):i()}}(this.options.notNextTick||this.notNextTick)?s():this.$nextTick(s)},updated:function(){this.swiper&&this.swiper.update()},beforeDestroy:function(){this.swiper&&(this.swiper.destroy(),delete this.swiper)}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"swiper-container"},[t._t("parallax-bg"),t._v(" "),e("div",{class:t.defaultSwiperClasses.wrapperClass},[t._t("default")],2),t._v(" "),t._t("pagination"),t._v(" "),t._t("button-prev"),t._v(" "),t._t("button-next"),t._v(" "),t._t("scrollbar")],2)},staticRenderFns:[]},o=e("C7Lr")(i,n,!1,null,null,null);s.default=o.exports},vp3U:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.44e270ae02f8e3d99462.js.map